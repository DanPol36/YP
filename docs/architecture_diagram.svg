<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- Generated SVG block diagram for docs/architecture_diagram.mmd -->
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="860" viewBox="0 0 1200 860">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="10" refY="5" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L10,5 L0,10 z" fill="#333" />
    </marker>
    <style>
      .box { fill:#f3f6f9; stroke:#2c3e50; stroke-width:1.6 }
      .sub { fill:#e9f7ef; stroke:#2ecc71; stroke-width:1.6 }
      .legacy { fill:#fff7e6; stroke:#f1c40f; stroke-width:1.6 }
      .orders { fill:#e6f7ff; stroke:#3498db; stroke-width:1.6 }
      .label { font: 14px/1.2 "Segoe UI", Roboto, Arial, sans-serif; fill:#17202a }
      .title { font: 16px/1.2 "Segoe UI", Roboto, Arial, sans-serif; font-weight:700; fill:#0b3a2e }
    </style>
  </defs>

  <!-- ENTRY -->
  <g>
    <rect x="36" y="30" width="300" height="70" class="box" rx="8"/>
    <text x="52" y="56" class="title">Точка входа</text>
    <text x="52" y="78" class="label">run.py — create_app()</text>
  </g>

  <!-- APP group -->
  <g>
    <rect x="380" y="20" width="760" height="220" class="sub" rx="10"/>
    <text x="400" y="44" class="title">Flask приложение — <tspan class="label">app/</tspan></text>

    <rect x="410" y="72" width="320" height="56" class="box" rx="8"/>
    <text x="430" y="98" class="label">app/__init__.py — create_app()</text>

    <rect x="410" y="140" width="320" height="56" class="box" rx="8"/>
    <text x="430" y="166" class="label">app/models/ — User, Document, Order</text>

    <rect x="750" y="72" width="320" height="56" class="box" rx="8"/>
    <text x="770" y="98" class="label">app/routes/ — auth, documents, people</text>

    <rect x="750" y="140" width="320" height="56" class="box" rx="8"/>
    <text x="770" y="166" class="label">templates/ — Jinja2 шаблоны</text>
  </g>

  <!-- LEGACY group -->
  <g>
    <rect x="60" y="260" width="520" height="260" class="legacy" rx="10"/>
    <text x="82" y="288" class="title">Legacy / raw SQL</text>

    <rect x="92" y="312" width="420" height="56" class="box" rx="8"/>
    <text x="112" y="338" class="label">instance/database.py — engine + Base</text>

    <rect x="92" y="384" width="420" height="56" class="box" rx="8"/>
    <text x="112" y="410" class="label">app/models/practic.py — practic2 (русские имена)</text>

    <rect x="92" y="456" width="420" height="56" class="box" rx="8"/>
    <text x="112" y="482" class="label">app/routes/people_search.py — фильтрация/агрегация</text>
  </g>

  <!-- ORDERS -->
  <g>
    <rect x="660" y="320" width="360" height="120" class="orders" rx="10"/>
    <text x="680" y="348" class="title">Заказы — Order model</text>
    <text x="680" y="372" class="label">app/models/order.py — order2</text>
    <text x="680" y="396" class="label">client_key — связь с practic2</text>
  </g>

  <!-- SCRIPTS / MIGRATIONS -->
  <g>
    <rect x="380" y="260" width="300" height="120" class="box" rx="10"/>
    <text x="402" y="288" class="title">Скрипты / Миграции</text>
    <text x="402" y="312" class="label">scripts/ — утилиты, seed, sql</text>
    <text x="402" y="336" class="label">migrations/ — Alembic</text>
  </g>

  <!-- STATIC / DOCS -->
  <g>
    <rect x="380" y="410" width="300" height="120" class="box" rx="10"/>
    <text x="402" y="442" class="title">Шаблоны / Документы</text>
    <text x="402" y="468" class="label">templates/, static/</text>
    <text x="402" y="492" class="label">docs/ — диаграммы, инструкции</text>
  </g>

  <!-- Arrows -->
  <g stroke="#2c3e50" stroke-width="2" fill="none" marker-end="url(#arrow)">
    <path d="M336 65 L380 65"/>
    <path d="M580 110 L410 110"/>
    <path d="M580 155 L750 155"/>
    <path d="M250 220 L380 220"/>
    <path d="M410 220 L410 260"/>
    <path d="M260 320 L410 320"/>
    <path d="M512 420 L660 420"/>
    <path d="M720 380 L720 320"/>
    <path d="M560 410 L560 380"/>
  </g>

  <!-- Small legend -->
  <g>
    <rect x="36" y="740" width="360" height="80" class="box" rx="8"/>
    <text x="52" y="770" class="label">Легенда: зеленая область — core Flask app; жёлтая — legacy/ручные SQL; синяя — заказы</text>
  </g>

</svg>
